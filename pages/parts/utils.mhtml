<< @(#) $Id$ >>

<element name='at'>
<ifne what='$title'>
 <ifne what='$target'>
  <ifne what='$class'>
   <asp><a href='$href' target='$target' class='$class' title='$title'><asp>
  <else>
   <asp><a href='$href' target='$target' title='$title'><asp>
  </ifne>
 <else>
  <ifne what='$class'>
   <asp><a href='$href' class='$class' title='$title'><asp>
  <else>
   <asp><a href='$href' title='$title'><asp>
  </ifne>
 </ifne>
<else>
 <ifne what='$target'>
  <ifne what='$class'>
   <asp><a href='$href' target='$target' class='$class'><asp>
  <else>
   <asp><a href='$href' target='$target'><asp>
  </ifne>
 <else>
  <ifne what='$class'>
   <asp><a href='$href' class='$class'><asp>
  <else>
   <asp><a href='$href'><asp>
  </ifne>
 </ifne>
</ifne>
</element>

<element name='perror'>
<if what='$$err==$id'>
 <tr><td colspan=2 class='error'>
  <a name='error'></a>
  $text
 </td></tr>
</if>
</element>

<element name='selflink'>
<table cellspacing=0 cellpadding=0><tr valign=bottom>
 <td><image src='/pics/self.gif'>&nbsp;</td>
 <td>
  <a href='$href'><notenglish>Ссылка<else>Link</notenglish></a>
 </td>
</tr></table>
</element>

<element name='maillink'>
<if what='$message.isEmailVisible'>
 <asp>&nbsp;<asp>
 <asp><a href='mailto:$#message.Email' title='Написать письмо'><asp>
  <image src='$$style_mail_image'>
 <asp></a>
</if>
</element>

<element name='mailloginlink'>
<if what='$message.isEmailVisible'>
 <asp><a href='mailto:$#message.Email' title='Написать письмо'><asp>
  $=message.Login
 <asp></a>
</if>
</element>

<element name='mailtolink'>
<if what='$message.isEmailVisible'>
 <asp><a href='mailto:$#message.Email' title='Написать письмо'><asp>
  $=message.Email
 <asp></a>
</if>
</element>

<element name='senderlink'>
<notenglish>
 <if what='!$message.isUserGuest'>
  <if what='$message.isUserVisible'>
   <a href='/users/$#message.UserFolder/?redirid=$_'
      onClick="userInfo($message.UserId); return false"
      title='подробнее' class='name'>$=message.Login</a><asp>
  <else>
   <span class='name'>$=message.Login</span><asp>
  </if>
 <else>
  <span class='guest-name'>$=message.GuestLogin</span><asp>
 </if>
</notenglish>
</element>

<callback name='user_name'>
<if what='!$data.isGuest'>
 <user_id login='$data.Login'>
 <ifnzero what='$,'>
  <user_obj id='$,'>
  <senderlink message='$,'>
 <else>
  <asp><span class='guest-name'>$data.Login</span><asp>
 </ifzero>
<else>
 <asp><span class='guest-name'>$data.Login</span><asp>
</if>
</callback>

<element name='lastonline'>
<if what='$user.isOnline'>
 <ifnzero what='$user.LastMinutes'>
  <zone>
   <array vals='минуту,минуты,минут'>
   <plural value='$user.LastMinutes'>
   $user.lastMinutes&nbsp;$, назад
  </zone>
 <else>
  Сейчас
 </if>
 <zone>
  <time>
  <biff time='$,'>
 </zone>
<else>
 <if what='$user.isTooOld'>
  Очень давно
 <else>
  <sentview date='$user.LastOnline'>
  <biff time='$user.LastOnline'>
 </if>
</if>
</element>

<element name='navi_sort'>
<if what='$$sort!=$value'>
 <a href='$[sort=$value offset]'>$title</a>
<else>
 <b>$title</b>
</if>
</element>

<element name='input_datetime'>
<assign name='year' value='$value@Y'>
<assign name='month' value='$value@n'>
<assign name='day' value='$value@j'>
<assign name='hour' value='$value@G'>
<assign name='minute' value='$value@i'>
<assign name='second' value='$value@s'>

<assign name='has_year' value!="strpos($format,'y')!==false">
<assign name='has_month' value!="strpos($format,'M')!==false">
<assign name='has_day' value!="strpos($format,'d')!==false">
<assign name='has_hour' value!="strpos($format,'h')!==false">
<assign name='has_minute' value!="strpos($format,'m')!==false">
<assign name='has_second' value!="strpos($format,'s')!==false">

<if what='$has_year'>
 <select name='${name}_year'>
  <time>
  <for n!='$,@Y - $base_year + 1'>
   <assign name='i' value!='$. + $base_year'>
   <select_option title='$i' value='$i' selected!='$i==$year'>
  </for>
 </select>
</if>
<if what='$has_year && $has_month'>
 -
</if>
<if what='$has_month'>
 <select name='${name}_month'>
  <for n=12>
   <assign name='i' value!='$. + 1'>
   <select_option title='$i' value='$i' selected!='$i==$month'>
  </for>
 </select>
</if>
<if what='($has_year || $has_month) && $has_day'>
 -
</if>
<if what='$has_day'>
 <select name='${name}_day'>
  <for n=31>
   <assign name='i' value!='$. + 1'>
   <select_option title='$i' value='$i' selected!='$i==$day'>
  </for>
 </select>
</if>
<if what='$has_hour || $has_minute || $has_second'>
 &nbsp;
</if>
<if what='$has_hour'>
 <select name='${name}_hour'>
  <for n=24>
   <select_option title='$.' value='$.' selected!='$.==$hour'>
  </for>
 </select>
</if>
<if what='$has_hour && $has_minute'>
 :
</if>
<if what='$has_minute'>
 <select name='${name}_minute'>
  <for n=60>
   <select_option title='$.' value='$.' selected!='$.==$minute'>
  </for>
 </select>
</if>
<if what='($has_hour || $has_minute) && $has_second'>
 :
</if>
<if what='$has_second'>
 <select name='${name}_second'>
  <for n=60>
   <select_option title='$.' value='$.' selected!='$.==$second'>
  </for>
 </select>
</if>
</element>

<element name='rss'>
<ifne what='$$rss_href'>
 <table width='100%' cellspacing='0' cellpadding='3' style='clear: both'>
  <tr valign='center'>
   <td>&nbsp;</td>
   <td align='right' width='1'><a href='$$rss_href'>RSS</a></td>
   <td align='right' width='1'>
    <a href='$$rss_href'><image src='/pics/rss_new.png'></a>
   </td>
  </tr>
 </table>
</ifne>
</element>

<callback name='incut'>
<if what="$data.Align=='right'">
 <assign name='ralign' value='left'>
<else>
 <assign name='ralign' value='right'>
</if>
<table class='nframe' width='$data.Width' align='$data.Align'
       cellpadding=5 cellspacing=0 style='margin-$ralign: 5px'>
 <tr><td>
</callback>

<callback name='_incut'>
 </td></tr>
</table>
</callback>
