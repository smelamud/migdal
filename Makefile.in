# Makefile for Migdal kernel

# @(#) $Id$

all:
	(cd $(uiName); $(MAKE) all)

Makefile: Makefile.in conf/migdal.conf
	./confmake $^ > Makefile

dbinfo:
	mysqldump -u $(dbUser) --password=$(dbPassword) $(dbName) \
		--no-data > migdal.db
	mysqldump -u $(dbUser) --password=$(dbPassword) $(dbName) \
		menu complain_types complain_statements mailing_types \
		--no-create-info >> migdal.db

install: all
	(cd $(uiName); $(MAKE) install)

pack: all
	tar zchf $(uiName).tar.gz --exclude 'CVS' --exclude '*.mhtml' \
		--exclude 'Makefile*' --exclude '_template*' \
		--exclude '.cvsignore' $(uiName)

clean:
	-rm $(OBJECTS)
	(cd $(uiName); $(MAKE) clean)
