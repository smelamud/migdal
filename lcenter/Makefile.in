# Makefile for Migdal website

# @(#) $Id$

OBJECTS = chmod.php groupadd.php grouporg.php horisontedit.php index.php \
	index-www.php journal.php login.php modbits.php postingedit.php \
	postingorg.php topicdel.php topicedit.php topicorg.php \
	topics-reorder.php

%.php: %.mhtml ../miparser ../macros.mhtml macros.mhtml
	../miparser -M ../macros.mhtml -M macros.mhtml $< > $@

all: $(OBJECTS)
	(cd grp; $(MAKE) all)
	(cd parts; $(MAKE) all)
	(cd styles; $(MAKE) all)
	(cd mailings; $(MAKE) all)

Makefile: Makefile.in ../conf/migdal.conf
	../confmake $^ > Makefile

dbinfo: ;

clean:
	-rm $(OBJECTS)
	(cd grp; $(MAKE) clean)
	(cd parts; $(MAKE) clean)
	(cd styles; $(MAKE) clean)
	(cd mailings; $(MAKE) clean)
