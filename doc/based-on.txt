Система меток Based-on:
=======================

Очень часто бывает, что изменения, сделанные в программе не находят отражения
в документации из-за того, что неизвестно, какие части документации
затрагивают эту часть программы, тем более, если над программой и ее
документированием работает несколько человек. Поскольку в поставке ядра, кроме
библиотек, есть еще и интерфейсы и на них лежит довольно существенная часть
функциональности, то может случиться, что исправления, сделанные в одном
интерфейсе, не находят отражения в другом. (Не путайте интерфейсы с темами -
темы отличаются только внешним видом, а интерфейсы еще и поведением, поскольку
ядро "Migdal" обладает подобной гибкостью.)

Для того, чтобы автоматизировать проверку подобных зависимостей, была
придумана система меток Based-on:, в которых хранится информация о
зависимостях между файлами в поставке ядра. Метки Based-on: могут быть
проставлены в любом файле, хранящемся в CVS.

Синтаксис:  Based-on: <filename> <revision> <comment>

Метка должна находиться в отдельной строке. Ключевое слово Based-on: начинает
метку и перед ним допустимы только пробелы и символы <,>,# - это сделано для
того, чтобы метки можно было проставлять внутри комментариев PHP, Perl и
MHTML.

<filename> - это имя файла в CVS. Имя файла указывается относительно корня
дерева исходников ядра.

<revision> - это CVS revision файла в тот момент, когда он был использован для
построения файла, в котором стоит метка.

Вся остальная часть строки является комментарием.

Пример метки:

# Based-on: chkbase 1.3

Эта метка показывает, что наш файл документации (based-on.txt) был составлен
по исходникам программы chkbase, речь о которой пойдет ниже. В тот момент,
когда я пишу эти строки, chkbase имеет CVS revision 1.3, что и указано в
метке. Если CVS revision изменится, то мне придется пересмотреть этот файл,
проверить, не нужно ли в нем что-либо изменить, и проставить в метке текущий
номер версии chkbase.

Заметьте, что эта метка является действующей, то есть по ней действительно
проверяется соответствие этой документации версии программы chkbase.

Программа chkbase предназначена для поиска несоответствий между файлами ядра,
основываясь на метках Based-on: и информации, полученной из CVS. Это означает,
что для ее работы необходимо, чтобы дерево исходников было получено из CVS.
chkbase по ходу своей работы запускает cvs status - это проще и коррекнее, чем
читать непосредственно CVS/Entries, хотя и требует, чтобы на машине была
установлена CVS.

chkbase должна запускаться из корня дерева исходников ядра. При обнаружении
несоответствия она выводит подробную информацию о том, где и какое
несоответствие было обнаружено. Если все в порядке, chkbase не выводит ничего.

@(#) $Id$
