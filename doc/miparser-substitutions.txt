Подстановки, обрабатываемые miparser
====================================

Подстановки параметров макросов
-------------------------------

%имя
%{имя}
  Значение указанного параметра.

%^имя
%^{имя}
  Значение указанного параметра в верхнем регистре.

%!имя
%!{имя}
  Символ, соответствующий типу указанного параметра.

%@имя
%@{имя}
  Значение указанного параметра, развернутое как список аргументов.

%?имя
%?{имя}
  Имя функции, соответствующей элементу, имя которого хранится в указанном
  параметре.

Подстановки переменных
----------------------

$`обозначение`
$`таблица:обозначение`
  Числовой идентификатор, соответствующий указанному обозначению в указанной
  таблице (entries по умолчанию).

$/идентификатор/
$/таблица:идентификатор/
  Путь в иерархии для записи с указанным идентификатором в указанной таблице
  (entries по умолчанию).

$/идентификатор,уровень/
$/таблица:идентификатор,уровень/
  Предок указанного уровня для записи с указанным идентификатором в указанной
  таблице (entries по умолчанию). Предок 0-го уровня - это корень иерархии,
  1-го уровня - его потомки и т.д.

$[параметры]
$#[параметры]
  URL текущей страницы, в котором заменены и/или удалены (если значение для
  замены не указано) указанные параметры. Символ # включает URL-кодирование
  результата.

*имя
*{имя}
  Символьная константа.

$_
  Идентификатор текущей страницы в таблице редиректов.

$-
$#-
  URL текущей страницы (URL-кодированный, если символ # указан).

$--
$#--
  URL предыдущей страницы (URL-кодированный, если символ # указан).

$~
  Имя текущего скрипта.

$?
$#?
  Текущая строка запроса (URL-кодированная, если символ # указан).

$.
$^.
$#.
$=.
  Значение текущей переменной цикла (в верхнем регистре, если указан символ ^,
  URL-кодированное - если # и HTML-кодированное - если =).

$,
$^,
  Значение последнего результата (в верхнем регистре, если символ ^ указан).

$;
  Последний итератор.

$*
  Последняя константа.

$имя
${имя}
$^имя
$^{имя}
  Значение указанной переменной (в верхнем регистре, если символ ^ указан).

$$имя
$${имя}
$$^имя
$$^{имя}
  Значение указанной глобальной переменной (в верхнем регистре, если символ ^
  указан).

$#имя
$#{имя}
$$#имя
$$#{имя}
  URL-кодированное значение указанной переменной (глобальной, если второй
  символ $ указан).

$=имя
$={имя}
$$=имя
$$={имя}
  HTML-кодированное значение указанной переменной (глобальной, если второй
  символ $ указан).

$.имя
${.имя}
  Значение указанного свойства объекта, на который указывает текущая переменная
  цикла.

$,имя
${,имя}
  Значение указанного свойства объекта, на который указывает последний
  результат.

$;имя
${;имя}
  Значение указанного свойства последнего итератора.

$объект.имя
${объект.имя}
$$объект.имя
$${объект.имя}
  Значение указанного свойства указанного объекта (глобального, если второй
  символ $ указан).

$^.имя
$^{.имя}
$^,имя
$^{,имя}
$^;имя
$^{;имя}
$^объект.имя
$^{объект.имя}
$$^объект.имя
$$^{объект.имя}
  Аналогично подстановкам без знака ^, но в верхнем регистре.

$#.имя
$#{.имя}
$#,имя
$#{,имя}
$#;имя
$#{;имя}
$#объект.имя
$#{объект.имя}
$$#объект.имя
$$#{объект.имя}
  Аналогично подстановкам без знака #, но URL-кодированные.

$=.имя
$={.имя}
$=,имя
$={,имя}
$=;имя
$={;имя}
$=объект.имя
$={объект.имя}
$$=объект.имя
$$={объект.имя}
  Аналогично подстановкам без знака =, но HTML-кодированные.

Подстановки даты
----------------

Если переменная содержит timestamp (количество секунд, прошедших с начала эпохи
Unix), после нее можно указать подстановку даты, чтобы извлечь нужный компонент
даты. Формат получается следующий:

<подстановка>@<буква>
<подстановка>@<календарь><буква>

<календарь> один из:
  E - грегорианский на английском языке;
  R - грегорианский на русском языке;
  I - еврейский на английском языке;
  J - еврейский на русском языке.

  По умолчанию: E

<буква> указывает нужную компоненту даты:

Календарь Буква  Значение
  E I       a     am/pm
  E I       A     AM/PM
  ERIJ      B     Swatch Internet time
   RIJ      c     День недели, три буквы, нижний регистр
   RIJ      C     День недели полностью, нижний регистр
  ERIJ      d     День месяца от 01 до 31
  ERIJ      D     День недели, три буквы, первая заглавная
   R J      f     Название месяца полностью, первая заглавная, родительный
                  падеж
  ERIJ      F     Название месяца полностью, первая заглавная, именительный
                  падеж
  ERIJ      g     Часы от 1 до 12
  ERIJ      G     Часы от 0 до 23
  ERIJ      h     Часы от 01 до 12
  ERIJ      H     Часы от 00 до 23
  ERIJ      i     Минуты от 00 до 59
  ERIJ      I     1, если летнее время, иначе 0
  ERIJ      j     День месяца от 1 до 31
   RIJ      J     Месяц, три буквы, нижний регистр
   R J      k     Название месяца полностью, нижний регистр, родительный падеж
   RIJ      K     Название месяца полностью, нижний регистр, именительный падеж
  ERIJ      l     День недели полностью, первая заглавная
  ERIJ      L     1, если год високосный, иначе 0
  ERIJ      m     Месяц от 01 до 12
  ERIJ      M     Название месяца, три буквы, первая заглавная
  ERIJ      n     Месяц от 1 до 12
  ERIJ      O     Разница с Гринвичем в часах
    IJ      q     -1, если год недостаточный, 1, если избыточный, иначе 0
    IJ      Q     Количество дней в году
  E         r     Дата/время, отформатированные по RFC 822
  ERIJ      s     Секунды от 00 до 59
  ERIJ      S     Порядковый суффикс для дня месяца
  ERIJ      t     Количество дней в месяце
  E I       T     Часовой пояс
  ERIJ      U     Количество секунд, прошедших с начала эпохи
    IJ      v     Номер месяца в году (адар-алеф в невисокосном году
                  превращается в просто адар).
  ERIJ      w     День недели от 0 до 6 (0 - воскресенье)
  ER        W     Номер недели в году
  ERIJ      y     Год, две цифры
  ERIJ      Y     Год, четыре цифры
  ERIJ      z     Номер дня в году
  ERIJ      Z     Разница с Гринвичем в секундах

@(#) $Id$
