Система идентификации
=====================

(Символические обозначения числовых меток, о которых здесь пойдет речь, в
языках программирования называются идентификаторами. Но, поскольку термином
"идентификатор" в базах данных обычно называют уникальное числовое поле, мы
будем называть их "обозначениями".)

Когда вам необходимо сослаться на статью, сообщение, тему или что-либо другое
при помощи URL'а, то очень неудобно указывать в нем числовой идентификатор.
Для начала этот идентификатор нужно узнать, поскольку он проставляется СУБД
автоматически (а значит сообщение уже должно быть внесено в базу), а если он
по какой-то причине изменится, то за соответствие вашего URL'а
действительности никто не отвечает.

Именно поэтому во многих таблицах наряду с числовым идентификатором хранится
символьное обозначение, которое вводится пользователем (желательно
администратором) при создании объекта. Обозначение в динамическом сайте (где
все объекты хранятся в БД) играет ту же роль, какую в статическом сайте играло
имя файла. Обозначения, а не числовые идентификаторы настоятельно
рекомендуется использовать, если вы ссылаетесь на хранящийся в БД объект из
контроллера.

Максимальная длина обозначения - 75 символов. Обозначение не должно начинаться
с цифры. Обозначение может делиться на компоненты при помощи точек (.).
Компоненты обозначения удобно использовать для построения каталогов на сайте.
Например, обозначение `migdal.library` превращается в каталог
`migdal/library/`. Подробнее смотрите в классе `CatalogUtils` и во всех
местах, где он используется.

По соглашению, идентификаторы постингов имеют префикс `post.`, который
игнорируется при преобразовании обозначения в каталог. Также, по соглашению,
ни один компонент обозначения не может быть числом, однако исторически это
соглашение нарушалось, и этот факт приходится учитывать.

Поле таблицы, в котором хранится обозначение, называется во всех
таблицах одинаково - ident. Для работы с обозначениями можно использовать
функции класса `IdentManager`.

```
long idOrIdent(String ident)
```

Эта функция выбирает из таблицы `entries` идентификатор, соответствующий
обозначению `ident`. Если `ident` - число, то эта функция возвращает `ident`.

Результаты, возвращаемые этой функцией, кэшируются в памяти, чтобы уменьшить
число обращений к БД.
