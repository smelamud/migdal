Система идентификации
=====================

(Символические обозначения числовых меток, о которых здесь пойдет речь, в
языках программирования называются идентификаторами. Но, поскольку термином
"идентификатор" в базах данных обычно называют уникальное числовое поле, мы
будем называть их "обозначениями".)

Когда вам необходимо сослаться на статью, сообщение, тему или что-либо другое
при помощи URL'а, то очень неудобно указывать в нем числовой идентификатор.
Для начала этот идентификатор нужно узнать, поскольку он проставляется СУБД
автоматически (а значит сообщение уже должно быть внесено в базу), а если он
по какой-то причине изменится, то за соответствие вашего URL'а
действительности никто не отвечает.

Именно поэтому во многих таблицах наряду с числовым идентификатором хранится
символьное обозначение, которое вводится пользователем (желательно
администратором) при создании объекта. Обозначение в динамическом сайте (где
все объекты хранятся в БД) играет ту же роль, какую в статическом сайте играло
имя файла. Обозначения, а не числовые идентификаторы настоятельно
рекомендуется использовать, если вы ссылаетесь на хранящийся в БД объект из
MHTML-скрипта.

Максимальная длина обозначения - 75 символов. Обозначение не должно начинаться
с цифры.

По соглашению, поле таблицы, в котором хранится обозначение, называется во всех
таблицах одинаково - ident. Для работы с обозначениями можно использовать
следующие функции (lib/ident.php):

function idByIdent($ident,$table='entries');

Эта функция выбирает из указанной таблицы идентификатор, соответствующий
обозначению $ident. Если $ident - число, то эта функция возвращает $ident.

Результаты, возвращаемые этой функцией, кэшируются в памяти, чтобы уменьшить
число обращений к БД.

function identById($id,$table='entries');

Эта функция выбирает из указанной таблицы обозначение, соответствующее
идентификатору $id. Если $id - не число, то эта функция возвращает $id.

Функции byIdent() и byIdentRecursive() были убраны из соображений
эффективности и читабельности кода. Учитывая то, что idByIdent() кэширует свои
результаты, гораздо эффективнее сразу выбирать с ее помощью числовой
идентификатор из базы всякий раз, когда он понадобится. В MHTML-скриптах для
этого удобно использовать подстановку $`` [NWD].

Based-on: migdal.db 1.81 (ограничения на длину обозначения)
Based-on: lib/ident.php 1.18

@(#) $Id$
