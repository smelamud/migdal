<< @(#) $Id$ >>

<macro name='tform'>
 <ifne what='$target'>
  <form method=post action='%action' target='$target'>
 <else>
  <form method=post action='%action'>
 </ifne>
 <hidden name='okdir' value="$[err]">
 <hidden name='faildir' value="$[err]">
</macro>

<macro name='/tform'>
 </form>
</macro>

<errors>
<element name='login'>
<table class='login'>
 <notlogged>
  <tform action='actions/login.php'>
   <error id='*EL_INVALID' text='Неверный ник или пароль' span=5>
   <tr>
    <td>Ник</td>
    <td><input type=text name='login' size=6 maxlength=30></td>
    <td>Пароль</td>
    <td><input type=password name='password' size=6></td>
    <td><input type=submit value='Войти'></td>
   </tr>
   <if what='!$no_new'>
    <tr><td colspan=5 align=right>
     <concat name='link' value='/register.php?redirid=$_'>
     <at href='$link' target='$target'>Зарегистрироваться</at>
    </td></tr>
   </if>
  </tform>
 <else>
  <tform action='actions/logout.php'>
   <error id='*ELO_SQL_GET' text='Ошибка базы данных при выборке записи'
          span=2 color=magenta>
   <error id='*ELO_SQL_SWITCH' text='Ошибка базы данных при обновлении записи'
          span=2 color=magenta>
   <error id='*ELO_SQL_DROP' text='Ошибка базы данных при удалении записи'
          span=2 color=magenta>
   <tr>
    <td>Пользователь: 
     <b>
     <if what='$$userHidden'>
      $$userLogin
     <else>
      <concat value='/userinfo.php?id=$$userId&redirid=$_'>
      <at href='$*' class='name' target='$target'>$$userLogin</at>
     </if>
     </b>
    </td>
    <td><input type=submit value='Выйти'></td>
   </tr>
  </tform>
  <admin_users>
   <tform action='actions/userswitch.php'>
    <error id='*EUS_NO_SWITCH' text='Вы не администратор' span=2>
    <error id='*EUS_NO_USER' text='Такого пользователя не существует' span=2>
    <error id='*EUS_SQL' text='Ошибка базы данных при обновлении записи'
	   span=2 color=magenta>
    <tr>
     <td align=right><input type=text name='login' size=10 maxlength=30></td>
     <td><input type=submit value='Сменить'></td>
    </tr>
   </tform>
  </admin_users>
 </notlogged>
</table>
</element>
