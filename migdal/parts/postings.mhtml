<< @(#) $Id$ >>
<< Based-on: demo/parts/postings.mhtml 1.6 >>

<element name='batcher_postings' params='value,list,topic,grp'>
<grpdata>
<grpitemtitle>
<grpitemstitle>
<table width=100% class='batcher'><tr valign=bottom>
 <td align=left><table><tr valign=bottom><td>
  <logged>
   <if what='$g.Valid'>
    <a href='postingedit.php?topic_id=$topic&grp=$grp&redir=$_'
       class='add'>Добавить $grpitemtitle</a>
   <else>
    <a href='postingedit.php?topic_id=$topic&grp=*GRP_NEWS&redir=$_'
       class='add'>Добавить новость</a>,
    <a href='postingedit.php?topic_id=$topic&grp=*GRP_FORUMS&redir=$_'
       class='add'>мнение</a>,
    <a href='postingedit.php?topic_id=$topic&grp=*GRP_ARTICLES&redir=$_'
       class='add'>статью</a>
   </if>
  <else>
   <span class='advert'>
    <if what='$g.Valid'>
     Хотите добавлять $grpitemstitle?
    <else>
     Хотите добавлять новости и статьи?
    </if>
    <a href='/register.php?redir=$_'>Зарегистрируйтесь!</a>
   </span>
  </logged>
 </td></tr></table></td>
 <td align=right><table><tr valign=center>
  <form method=get action='$~'>
   <hiddenget remove='mp'>
   <td><input type=submit value='Показывать'></td>
   <td>по</td>
   <td>
    <select_portion name='mp' value='$value' vals='10 15 20 25 30 35 40'>
   </td>
   <td>из&nbsp;$list.Size&nbsp;<asp><ofmessages value='$list.Size'></td>
  </form>
  <if what='$list.Size>$list.Limit'>
   <form method=post action='actions/goto.php'>
    <hidden name='okdir' value='$-'>
    <hidden name='size' value='$list.Size'>
    <td align=right width=32>
     <ifnzero what='$list.Offset'>
      <a href="$[offset='$list.PrevOffset']" title='Предыдущие'>
       <img src='pics/left.gif' border=0></a>
     </ifzero>
    </td>
    <td align=right>
     <edit name='value' value='$list.BeginValue' size=2 maxlength=5>
    </td>
    <td align=center>-</td>
    <td align=right>
     $list.EndValue
    </td>
    <td align=left width=32>
     <if what='$list.EndValue<$list.Size'>
      <a href="$[offset='$list.NextOffset']" title='Следующие'>
       <img src='pics/right.gif' border=0></a>
     </if>
    </td>
   </form>
  </if>
 </tr></table></td>
</tr></table>
</element>

<element name='postings'>
<iterate_postinglist grp='$grp' topic='$topic' limit='$limit' offset='$offset'
                     sort='*SORT_PSENT'>
<if what='$$userId>0 || $;Count!=0'>
 <batcher_postings value='$limit' list='$;' topic='$topic' grp='$grp'>
 <table>
  <error id='*EMH_NO_MESSAGE' text='Такого сообщения не существует'>
  <error id='*EMH_NO_MODERATE' text='Вы не модератор'>
 </table>
 <for>
  <posting posting='$.' grp='$grp' topic='$topic' shorten='*true'>
 </for>
 <ifnzero what='$;Count'>
  <batcher_postings value='$limit' list='$;' topic='$topic' grp='$grp'>
 </ifnzero>
<else>
 &nbsp;
</if>
</element>
