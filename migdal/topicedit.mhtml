<< @(#) $Id$ >>

<pagetitle title='Редактирование темы'>

<int name='editid'>
<int name='up'>

<html>
<preamble>
<body>
 <top ident='topics'>
 <topic_obj id='$editid' up='$up'>
 <setup>
 <if what='$editid'>
  <formtable title='Изменить тему'>
 <else>
  <formtable title='Добавить тему'>
 </if>
 <form method=post enctype='multipart/form-data' action='actions/topicmod.php'>
  <hidden name='edittag' value=1>
  <hidden name='redirid' value='$_'>
  <hidden name='okdir' value='$--'>
  <hidden name='faildir' value='$-'>
  <hidden name='editid' value='$editid'>
  <table>
   <starinfo>
   <error id='*ET_NO_EDIT' text='У вас нет права менять список тем'>
   <error id='*ET_STORE_SQL' text='Ошибка базы данных при обновлении записи'
	  color='magenta'>
   <error id='*ET_TRACK_SQL' color='magenta'
	  text='Ошибка базы данных при обновлении маршрута темы'>
   <tr><td><table>
    <error id='*ET_NO_UP' text='Такой темы не существует' span=2>
    <error id='*ET_LOOP_UP' text='Тема не может быть подтемой самой себя' span=2>
    <topicselect title='Надтема' name='up' grp='*GRP_ALL' value='$,UpValue'>
    <error id='*ET_NAME_ABSENT' text='Название не было введено' span=2>
    <edit_line title='Название' value=$,Name name='name' size=30 maxlength=70
               mandatory='*true'>
    <error id='*ET_IDENT_UNIQUE' text='Так уже обозначена другая тема' span=2>
    <edit_line title='Обозначение' name='ident' value='$,Ident'
	       size=15 maxlength=15>
   </table></td></tr>
   <error id='*ET_DESCRIPTION_ABSENT' text='Описание не было задано'>
   <editor_line title='Описание' name='description' body='$,Description'
                mandatory='*true'>
   <checkbox_line name='hidden' value='$,isHidden'
		  title='Не показывать в списке'>
   <error id='*ET_MUST_ALLOW'
          text='Тема должна быть для какого-то вида сообщений'>
   <tr><td><table width=100%>
    <iterate_grps>
    <for>
     <if what='$.isValid'>
      <concat name='premoderateIdent' value='premoderate_$.GrpIdent'>
      <if what='($,Allow & $.Grp)!=0'>
       <assign name='allow' value='*true'>
      <else>
       <assign name='allow' value='*false'>
      </if>
      <if what='($,Premoderate & $.Grp)!=0'>
       <assign name='premoderate' value='*true'>
      <else>
       <assign name='premoderate' value='*false'>
      </if>
      <concat name='foritems' value='Тема для $.GrpForItemsTitle'>
      <concat name='titles' value='$.GrpTitles премодерируются'>
      <tr>
       <td><checkbox name='$.GrpIdent' value='$allow' title='$foritems'></td>
       <td><checkbox name='$premoderateIdent' value='$premoderate'
		     title='$titles'></td>
      </tr>
     </if>
    </for>
   </table></td></tr>
  <if what='$editid'>
   <formbuttons title='Изменить'>
  <else>
   <formbuttons title='Добавить'>
  </if>
  </table>
 </form>
 </formtable>
 <bottom>
</body>
</html>
