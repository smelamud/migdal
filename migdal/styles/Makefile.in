# Makefile for Migdal website

# @(#) $Id$

STYLES = default old contrast test
OBJECTS = $(patsubst %,style-%.css,$(STYLES)) $(patsubst %,style-%.php,$(STYLES))
PARTS = colors.mcss fonts.mcss palette.mcss sheet-general.mcss \
	sheet-menu.mcss sheet-bottom.mcss sheet-state.mcss sheet-return.mcss \
	sheet-batcher.mcss sheet-posting.mcss sheet-forum.mcss \
	sheet-forum-batcher.mcss sheet-topics.mcss sheet-catalog.mcss \
	sheet-picture.mcss sheet-form.mcss sheet-article.mcss \
	sheet-complain.mcss sheet-chat.mcss sheet-userinfo.mcss

style-%.php: style.mcss $(PARTS) ../../cssparser
	../../cssparser -p -s $* $< > $@

style-%.css: style.mcss $(PARTS) ../../cssparser
	../../cssparser -s $* $< > $@

all: $(OBJECTS)

Makefile: Makefile.in ../../conf/migdal.conf
	../../confmake $^ > Makefile

clean:
	-rm $(OBJECTS)
