# @(#) $Id$

#
# Actions
#

path=/actions/admin/postings
script=actions/postingorg-goto.php

path=/actions/checkcookies
script=actions/checkcookies.php

path=/actions/cross-entry/add
script=actions/crossentryadd.php

path=/actions/cross-entry/delete
script=actions/crossentrydel.php

path=/actions/goto
script=actions/goto.php

path=/actions/link/{id}
script=actions/link.php
arg.msgid:integer=${id}

path=/actions/links/goto
script=actions/links-goto.php

path=/actions/login
script=actions/login.php

path=/actions/logout
script=actions/logout.php

path=/actions/posting/modify
script=actions/postingmod.php

path=/actions/posting/image/delete
script=actions/limdel.php

path=/actions/posting/image/modify
script=actions/limmod.php

path=/actions/reorder
script=actions/reorder.php

path=/actions/su
script=actions/userswitch.php

path=/actions/topic/delete
script=actions/topicdel.php

path=/actions/topic/modify
script=actions/topicmod.php

path=/actions/user/modify
script=actions/usermod.php

#
# Sources
#

path=/plaintext/{id}/
script=sources/plaintext.php
arg.id:ident=${id}
arg.charset:string=koi

path=/plaintext/{id}/{charset}/
script=sources/plaintext.php
arg.id:ident=${id}
arg.charset:string=${charset}

path=/xml/{id}/{name}/
script=sources/xml-text.php
arg.id:ident=${id}
arg.name:string=${name}

#
# Pages
#

# Root

path=/
domain=www
script=index-www.php
arg.menu_file:string=parts/topics-major.php
arg.menu_element:string=topics_major
arg.menu_index:string=index
title=Главная

path=/
domain=english
script=index-english.php
title=Главная

# Admin

path=/admin/ears/
script=ears.php
title=Ушки

path=/admin/ears/add/
script=postingedit.php
arg.grp:grp=EARS
parent.path=/admin/ears/
title=Добавление ушка

path=/admin/ears/{id}/edit/
script=postingedit.php
arg.editid:ident=${id}
arg.grp:grp=EARS
parent.path=/admin/ears/
title=Редактирование ушка

path=/admin/postings/
script=postingorg.php
title=Сообщения

path=/admin/postings/add/
script=postingedit.php
parent.path=/admin/postings/
title=Добавление сообщения

path=/admin/postings/{id}/edit/
script=postingedit.php
arg.editid:ident=${id}
parent.path=/admin/postings/
title=Редактирование сообщения

path=/admin/topics/
script=topicorg.php
title=Темы

path=/admin/topics/add/
script=topicedit.php
arg.editid:ident=0
arg.up:integer=0
parent.path=/admin/topics/
title=Добавление темы

path=/admin/topics/{id}/
script=topicorg.php
arg.up:integer=${id}
id.topicorg:integer=${id}
parent.path=/admin/topics/
title=Темы - ${topicName(arg.up)}
title.rel=${topicName(arg.up)}

path=/admin/topics/{target:path}/add/
script=topicedit.php
arg.editid:integer=0
arg.up:integer=${orig.id.topicorg}
parent.path=/admin/topics/${target}/
orig.path=/admin/topics/${target}/
title=Добавление темы

path=/admin/topics/{target:path}/delete/
script=topicdel.php
arg.topic_id:integer=${orig.id.topicorg}
parent.path=/admin/topics/${target}/
orig.path=/admin/topics/${target}/
title=Удаление темы

path=/admin/topics/{target:path}/edit/
script=topicedit.php
arg.editid:integer=${orig.id.topicorg}
parent.path=/admin/topics/${target}/
orig.path=/admin/topics/${target}/
title=Редактирование темы

path=/admin/topics/{target:path}/reorder/
script=reorder.php
arg.istopic:integer=1
arg.up:integer=${orig.id.topicorg}
parent.path=/admin/topics/${target}/
orig.path=/admin/topics/${target}/
title=Расстановка тем

path=/admin/topics/{up:path}/{id}/
script=topicorg.php
arg.up:integer=${id}
id.topicorg:integer=${id}
parent.path=/admin/topics/${up}/
title=Темы - ${topicName(arg.up)}
title.rel=${topicName(arg.up)}

# Root II

path=/index/
domain=www
script=index-www.php
arg.menu_file:string=parts/topics-major.php
arg.menu_element:string=topics_major
arg.menu_index:string=index
title=Главная

path=/index/
domain=english
script=index-english.php
title=Главная

# Links

path=/links/
script=links.php
parent.path=/
title=Ссылки

path=/links/add/
script=postingedit.php
arg.grp:grp=LINKS
parent.path=/links/
title=Добавление ссылки

path=/links/urls/
script=urls.php
parent.path=/links/
title=Ссылки - Алфавитный указатель
title.rel=Алфавитный указатель

path=/links/urls/add/
script=postingedit.php
arg.grp:grp=LINKS
parent.path=/links/urls/
title=Добавление ссылки

path=/links/{id}/
cond:topic=${id}|links/${id}
script=links.php
arg.topic_id:ident=${id}|links/${id}
id.upper:integer=${arg.topic_id}
parent.path=/links/
title=Ссылки - ${topicBodyOrName(arg.topic_id)}
title.rel=${topicName(arg.topic_id)}
title.full=${topicName(arg.topic_id)}
link.id=${arg.topic_id}
link.title=${topicName(arg.topic_id)}
link.icon=links

path=/links/{id}/add/
script=postingedit.php
arg.parent_id:ident=${id}|links/${id}
arg.grp:grp=LINKS
parent.path=/links/${id}/
title=Добавление ссылки

path=/links/{up:path}/{id}/
cond:topic=${id}|links/${up}/${id}
script=links.php
arg.topic_id:ident=${id}|links/${up}/${id}
parent.path=/links/${up}/
title=Ссылки - ${topicBodyOrName(arg.topic_id)}
title.rel=${topicName(arg.topic_id)}
title.full=${parent.title.full} :: ${topicName(arg.topic_id)}
link.id=${arg.topic_id}
link.title=${parent.link.title} :: ${topicName(arg.topic_id)}
link.icon=links

path=/links/{up:path}/{id}/
cond:posting=${id}
script=link.php
arg.postid:ident=${id}
id.posting:ident=${id}
id.grp:grp=LINKS
parent.path=/links/${up}/
title=Ссылки - ${postingHeading(arg.postid)}
title.rel=${postingHeading(arg.postid)}

path=/links/{up:path}/{id}/add/
script=postingedit.php
arg.parent_id:ident=${id}|links/${up}/${id}
arg.grp:grp=LINKS
parent.path=/links/${up}/
title=Добавление ссылки

path=/major/
script=cross-entries.php
arg.source_name:string=major
arg.link_type:link_type=MAJOR
parent.path=/
title=Основные темы

path=/major/add-cross/
script=cross-entry-add.php
parent.path=/major/
title=Добавление темы к основным

# Migdal

path=/migdal/
script=migdal.php
arg.artid:ident=post.migdal
arg.menu_file:string=parts/topics-major.php
arg.menu_element:string=topics_major
arg.menu_index:string=migdal
id.posting:ident=post.migdal
id.grp:grp=REVIEWS
parent.path=/
title=${postingHeading(arg.artid)}
title.rel=Мигдаль
title.full=Мигдаль

path=/migdal/beitenu/
script=migdal.php
arg.artid:ident=post.migdal.beitenu
arg.menu_file:string=parts/topics-migdal.php
arg.menu_element:string=topics_beitenu
arg.menu_index:string=migdal.beitenu
id.posting:ident=post.migdal.beitenu
id.grp:grp=REVIEWS
parent.path=/migdal/
title=${postingHeading(arg.artid)}
title.full=Мигдаль :: ${postingHeading(arg.artid)}

path=/migdal/beitenu/gallery/
script=gallery.php
arg.topic_id:ident=migdal.beitenu
arg.menu_file:string=parts/topics-migdal.php
arg.menu_element:string=topics_beitenu
arg.menu_index:string=migdal.beitenu.gallery
arg.menu_main:string=index
parent.path=/migdal/beitenu/
title=${topicName(arg.topic_id)} - Галерея
title.rel=Галерея
title.full=Мигдаль :: ${topicName(arg.topic_id)}

path=/migdal/jcc/
script=jcc.php
arg.menu_file:string=parts/topics-migdal.php
arg.menu_element:string=topics_jcc
arg.menu_index:string=migdal.jcc
id.posting:ident=post.migdal.jcc
id.grp:grp=REVIEWS
parent.path=/migdal/
title=${postingHeading(id.posting)}
title.full=Мигдаль :: ${postingHeading(id.posting)}
link.name=migdal.jcc
link.title=${postingHeading(id.posting)}
link.icon=topic

path=/migdal/jcc/add/
script=postingedit.php
arg.parent_id:ident=migdal.jcc
arg.grp:grp=REVIEWS
parent.path=/migdal/jcc/
title=Добавление статьи

path=/migdal/jcc/choir/
script=migdal.php
arg.artid:ident=post.migdal.jcc.choir
arg.menu_file:string=parts/topics-migdal.php
arg.menu_element:string=topics_choir
arg.menu_index:ident=post.migdal.jcc.choir
id.posting:ident=post.migdal.jcc.choir
id.grp:grp=REVIEWS
parent.path=/migdal/jcc/
title=${postingHeading(arg.artid)}
title.full=Мигдаль :: ${postingHeading(arg.artid)}

path=/migdal/jcc/choir/{id}/
script=migdal.php
arg.artid:ident=${id}
arg.archive:integer=1
arg.menu_file:string=parts/topics-migdal.php
arg.menu_element:string=topics_choir
arg.menu_index:integer=${id}
id.posting:integer=${id}
id.grp:grp=REVIEWS
parent.path=/migdal/jcc/choir/
title=${postingHeading(arg.artid)} (архив от ${archiveDate(arg.artid)})
title.rel=Архив от ${archiveDate(arg.artid)}
title.full=Мигдаль :: ${postingHeading(arg.artid)}

path=/migdal/jcc/dances/
script=migdal.php
arg.artid:ident=post.migdal.jcc.dances
arg.menu_file:string=parts/topics-migdal.php
arg.menu_element:string=topics_dances
arg.menu_index:ident=post.migdal.jcc.dances
id.posting:ident=post.migdal.jcc.dances
id.grp:grp=REVIEWS
parent.path=/migdal/jcc/
title=${postingHeading(arg.artid)}
title.full=Мигдаль :: ${postingHeading(arg.artid)}

path=/migdal/jcc/dances/{id}/
script=migdal.php
arg.artid:ident=${id}
arg.archive:integer=1
arg.menu_file:string=parts/topics-migdal.php
arg.menu_element:string=topics_dances
arg.menu_index:integer=${id}
id.posting:integer=${id}
id.grp:grp=REVIEWS
parent.path=/migdal/jcc/dances/
title=${postingHeading(arg.artid)} (архив от ${archiveDate(arg.artid)})
title.rel=Архив от ${archiveDate(arg.artid)}
title.full=Мигдаль :: ${postingHeading(arg.artid)}

path=/migdal/jcc/reorder/
script=reorder.php
arg.parent_id:ident=migdal.jcc
arg.recursive:integer=0
arg.grp:grp=REVIEWS
arg.withident:integer=1
parent.path=/migdal/jcc/
title=Расстановка статей

path=/migdal/jcc/student/
script=migdal.php
arg.artid:ident=post.migdal.jcc.student
arg.menu_file:string=parts/topics-migdal.php
arg.menu_element:string=topics_kes
arg.menu_index:ident=post.migdal.jcc.student
id.posting:ident=post.migdal.jcc.student
id.grp:grp=REVIEWS
parent.path=/migdal/jcc/
title=${postingHeading(arg.artid)}
title.full=Мигдаль :: ${postingHeading(arg.artid)}

path=/migdal/jcc/student/gallery/
script=gallery.php
arg.topic_id:ident=migdal.jcc.student
arg.menu_file:string=parts/topics-migdal.php
arg.menu_element:string=topics_kes
arg.menu_index:ident=migdal.jcc.student.gallery
arg.menu_main:string=index
parent.path=/migdal/jcc/student/
title=${topicName(arg.topic_id)} - Галерея
title.rel=Галерея
title.full=Мигдаль :: ${topicName(arg.topic_id)}

path=/migdal/jcc/{id}/
cond:posting=${id}|post.migdal.jcc.${id}
script=migdal.php
arg.artid:ident=${id}|post.migdal.jcc.${id}
arg.menu_file:string=parts/topics-migdal.php
arg.menu_element:string=topics_jcc
arg.menu_index:ident=${id}|post.migdal.jcc.${id}
id.posting:ident=${id}|post.migdal.jcc.${id}
id.grp:grp=REVIEWS
parent.path=/migdal/jcc/
title=${postingHeading(arg.artid)}
title.full=Мигдаль :: ${postingHeading(arg.artid)}

path=/migdal/library/
script=migdal-library.php
arg.menu_file:string=parts/topics-migdal.php
arg.menu_element:string=topics_migdal_library
arg.menu_index:string=migdal.library
id.posting:ident=post.migdal.library
id.grp:grp=REVIEWS
parent.path=/migdal/
title=${postingHeading(id.posting)}
title.full=Мигдаль :: ${postingHeading(id.posting)}

path=/migdal/library/novelties/
script=migdal-library-novelties.php
arg.menu_file:string=parts/topics-migdal.php
arg.menu_element:string=topics_migdal_library
arg.menu_index:string=migdal.library.novelties
parent.path=/migdal/library/
title=Новинки библиотеки
title.full=Мигдаль :: Новинки библиотеки
link.name=migdal.library.novelties
link.title=Новинки библиотеки <<Мигдаля>>
link.icon=topic

path=/migdal/library/{id}/
cond:posting=${id}
script=${grpDetails(arg.postid)}
arg.postid:ident=${id}
arg.menu_file:string=parts/topics-migdal.php
arg.menu_element:string=topics_migdal_library
arg.menu_index:string=migdal.library.novelties
arg.menu_main:string=index
id.posting:ident=${id}
id.grp:grp=LIBRARY_NOVELTIES
parent.path=/migdal/library/novelties/
title=${postingHeading(arg.postid)}

path=/migdal/mazltov/
script=migdal.php
arg.artid:ident=post.migdal.mazltov
arg.menu_file:string=parts/topics-migdal.php
arg.menu_element:string=topics_mazltov
arg.menu_index:string=migdal.mazltov
id.posting:ident=post.migdal.mazltov
id.grp:grp=REVIEWS
parent.path=/migdal/
title=${postingHeading(arg.artid)}
title.full=Мигдаль :: ${postingHeading(arg.artid)}

path=/migdal/mazltov/gallery/
script=gallery.php
arg.topic_id:ident=migdal.mazltov
arg.menu_file:string=parts/topics-migdal.php
arg.menu_element:string=topics_mazltov
arg.menu_index:string=migdal.mazltov.gallery
arg.menu_main:string=index
parent.path=/migdal/mazltov/
title=${topicName(arg.topic_id)} - Галерея
title.rel=Галерея
title.full=Мигдаль :: ${topicName(arg.topic_id)}

path=/migdal/methodology/
script=methodic-center.php
arg.menu_file:string=parts/topics-migdal.php
arg.menu_element:string=topics_methodology
arg.menu_index:string=migdal.methodology
id.posting:ident=post.migdal.methodology
id.grp:grp=REVIEWS
parent.path=/migdal/
title=${postingHeading(id.posting)}
title.full=Мигдаль :: ${postingHeading(id.posting)}
link.name=migdal.methodology
link.title=${postingHeading(id.posting)}
link.icon=topic

path=/migdal/methodology/books/
script=methodics.php
arg.menu_file:string=parts/topics-migdal.php
arg.menu_element:string=topics_methodology
arg.menu_index:string=migdal.methodology.books
parent.path=/migdal/methodology/
title=Методические пособия
title.full=Мигдаль :: Методические пособия
link.name=migdal.methodology.books
link.title=Методические пособия <<Мигдаля>>
link.icon=topic

path=/migdal/migdal-or/
script=migdal.php
arg.artid:ident=post.migdal.migdal-or
arg.menu_file:string=parts/topics-migdal.php
arg.menu_element:string=topics_migdal_or
arg.menu_index:string=migdal.migdal-or
id.posting:ident=post.migdal.migdal-or
id.grp:grp=REVIEWS
parent.path=/migdal/
title=${postingHeading(arg.artid)}
title.full=Мигдаль :: ${postingHeading(arg.artid)}

path=/migdal/migdal-or/gallery/
script=gallery.php
arg.topic_id:ident=migdal.migdal-or
arg.menu_file:string=parts/topics-migdal.php
arg.menu_element:string=topics_migdal_or
arg.menu_index:string=migdal.migdal-or.gallery
arg.menu_main:string=index
parent.path=/migdal/migdal-or/
title=${topicName(arg.topic_id)} - Галерея
title.rel=Галерея
title.full=Мигдаль :: ${topicName(arg.topic_id)}

path=/migdal/museum/
script=migdal.php
arg.artid:ident=post.migdal.museum
arg.menu_file:string=parts/topics-migdal.php
arg.menu_element:string=topics_museum
arg.menu_index:string=migdal.museum
id.posting:ident=post.migdal.museum
id.grp:grp=REVIEWS
parent.path=/migdal/
title=${postingHeading(arg.artid)}
title.full=Мигдаль :: ${postingHeading(arg.artid)}

path=/migdal/museum/gallery/
script=gallery.php
arg.topic_id:ident=migdal.museum
arg.menu_file:string=parts/topics-migdal.php
arg.menu_element:string=topics_museum
arg.menu_index:string=migdal.museum.gallery
arg.menu_main:string=index
parent.path=/migdal/museum/
title=${topicName(arg.topic_id)} - Галерея
title.rel=Галерея
title.full=Мигдаль :: ${topicName(arg.topic_id)}

path=/migdal/news/
script=migdal-news.php
arg.topic_id:ident=migdal
arg.menu_file:string=parts/topics-major.php
arg.menu_element:string=topics_major
arg.menu_index:string=migdal.news
parent.path=/migdal/
title=${topicName(arg.topic_id)}
title.rel=Новости
link.name=migdal.news
link.title=${topicName(arg.topic_id)}
link.icon=topic

path=/migdal/printings/
script=printings.php
arg.menu_file:string=parts/topics-major.php
arg.menu_element:string=topics_major
arg.menu_index:string=migdal.printings
parent.path=/migdal/
title=Издательский центр
title.full=Мигдаль :: Издательский центр
link.name=migdal.printings
link.title=Издательский центр
link.icon=topic

path=/migdal/printings/add/
script=postingedit.php
arg.parent_id:ident=migdal.printings
arg.grp:grp=LIBRARY_NOVELTIES
parent.path=/migdal/printings
title=Добавление книги

path=/migdal/printings/reorder/
script=reorder.php
arg.istopic:integer=1
arg.up:ident=migdal.printings
parent.path=/migdal/printings/
title=Расстановка подразделов

path=/migdal/printings/{up}/
redirect.path=/migdal/printings/

path=/migdal/printings/{up}/reorder/
script=reorder.php
arg.istopic:integer=0
arg.parent_id:ident=${up}|migdal.printings.${up}
arg.recursive:integer=0
arg.grp:grp=LIBRARY_NOVELTIES
arg.up:integer=-1
parent.path=/migdal/printings/
title=Расстановка книг

path=/migdal/printings/{up}/{id}/
cond:posting=${id}
script=${grpDetails(arg.postid)}
arg.postid:ident=${id}
arg.menu_file:string=parts/topics-major.php
arg.menu_element:string=topics_major
arg.menu_index:string=migdal.printings
arg.menu_main:string=index
id.posting:ident=${id}
id.grp:grp=LIBRARY_NOVELTIES
parent.path=/migdal/printings/
title=${postingHeading(arg.postid)}

path=/migdal/{id}/
cond:posting=post.migdal.${id}
script=migdal.php
arg.artid:ident=post.migdal.${id}
arg.menu_file:string=parts/topics-major.php
arg.menu_element:string=topics_major
arg.menu_index:string=migdal.${id}
id.posting:ident=post.migdal.${id}
id.grp:grp=REVIEWS
parent.path=/migdal/
title=${postingHeading(arg.artid)}
title.full=Мигдаль :: ${postingHeading(arg.artid)}

path=/migdal/{id}/
cond:posting=${id}
script=${grpDetails(arg.postid)}
arg.postid:ident=${id}
arg.menu_file:string=parts/topics-major.php
arg.menu_element:string=topics_major
arg.menu_index:string=migdal.news
id.posting:ident=${id}
id.grp:grp=NEWS
parent.path=/migdal/news/
title=${postingHeading(arg.postid)}
title.full=Мигдаль :: ${postingHeading(arg.artid)}

path=/migdal/{id}/news/
script=migdal-news.php
arg.topic_id:ident=migdal.${id}
arg.menu_file:string=parts/topics-migdal.php
arg.menu_element:string=topics_${id}
arg.menu_index:string=migdal.${id}.news
id.chapter:ident=migdal.${id}
parent.path=/migdal/${id}/
title=${topicName(id.chapter)} - Новости
title.rel=Новости
link.name=migdal.${id}.news
link.title=${topicName(id.chapter)} - Новости
link.icon=topic

path=/migdal/{up}/{id}/
cond:posting=${id}
script=${grpDetails(arg.postid)}
arg.postid:ident=${id}
arg.menu_file:string=parts/topics-migdal.php
arg.menu_element:string=topics_${up}
arg.menu_index:string=migdal.${up}.news
id.posting:ident=${id}
id.grp:grp=NEWS
parent.path=/migdal/${up}/news/
title=${postingHeading(arg.postid)}

# Other

path=/phpinfo/
script=tools/phpinfo.php

path=/rating/{id}/
script=rating.php
arg.postid:ident=${id}
title=Рейтинг сообщения

path=/register/
script=register.php
parent.path=/
title=Регистрация пользователя

path=/register/confirm/{id}
script=userok.php
arg.id:user=${id}
parent.path=/
title=Подтверждение регистрации

path=/search/
script=search.php
parent.path=/
title=Поиск

path=/users/
script=users.php
parent.path=/
title=Пользователи

path=/users/{id}/
script=userinfo.php
arg.id:user=${id}
parent.path=/users/
title=О пользователе

path=/users/{id}/edit/
script=useredit.php
arg.editid:user=${id}
parent.path=/users/${id}/
title=Изменение информации о пользователе

# Generic

path=/{id}/
cond:topic=${id}
script=index-www.php
arg.topic_id:ident=${id}
arg.menu_file:string=parts/topics-major.php
arg.menu_element:string=topics_major
arg.menu_index:ident=${id}
id.upper:integer=${arg.topic_id}
parent.path=/
title=${topicName(arg.topic_id)}
link.id=${arg.topic_id}
link.title=${topicName(arg.topic_id)}
link.icon=topic

path=/{up:path}/{id}/
cond:posting=${id}
script=${grpDetails(arg.postid)}
arg.postid:ident=${id}
arg.menu_file:string=parts/topics-major.php
arg.menu_element:string=topics_major
arg.menu_index:ident=${orig.id.upper}
arg.menu_main:string=index
id.posting:ident=${id}
id.grp:grp=NEWS
parent.path=/${up}/
orig.path=/${up}/
title=${postingHeading(arg.postid)}

path=/{post:path}/add-cross/
script=cross-entry-add.php
parent.path=/${post}/
title=Добавление перекрестной ссылки

path=/{post:path}/edit/
script=postingedit.php
arg.editid:ident=${orig.id.posting}
parent.path=/${post}/
orig.path=/${post}/
title=Редактирование ${postingGrpWhatV(arg.editid)}

path=/{post:path}/images/
script=limedit.php
arg.postid:ident=${orig.id.posting}
parent.path=/${post}/
orig.path=/${post}/
title=Список иллюстраций

path=/{post:path}/images/insert/
script=liminsert.php
arg.postid:ident=${orig.id.posting}
parent.path=/${post}/images/
orig.path=/${post}/
title=Вставить картинку
