<< @(#) $Id$ >>

<modbits>
<int name='bit'>
<ifzero what='$bit'>
 <assign name='bit' value='*MOD_MODERATE'>
</ifzero>
<int name='offset'>
<int name='sort'>
<assign name='sort' value!='$sort!=*SORT_RSENT ? *SORT_SENT : *SORT_RSENT'>

<element name='batcher' params='&list'>
<center style='margin: 0; padding: 0'>
 <spin list='$list'>
</center>
</element>

<element name='buttons'>
<table width=100%><tr>
 <td align=right><table><tr>
  <td><input type=submit value='Сохранить'></td>
  <td><input type=reset value='Очистить'></td>
 </tr></table></td>
</tr></table>
</element>

<element name='selector'>
<table class='nframe'><tr>
 <td>
  <if what='$$sort==*SORT_SENT'>
   <a href="$[sort='*SORT_RSENT']">
    <image src='/pics/down-level.gif' border=0></a>
  <else>
   <a href="$[sort='*SORT_SENT']">
    <image src='/pics/up-level.gif' border=0></a>
  </if>
 </td>
 <form method=get action='$-'>
  <hidden name='sort' value='$$sort'>
  <td><select name='bit'>
   <select_option title='(h) Не показывать' value='*MOD_HIDDEN'
                  selected!='$$bit==*MOD_HIDDEN'>
   <select_option title='(d) Запретить' value='*MOD_DISABLED'
                  selected!='$$bit==*MOD_DISABLED'>
   <iterate_posting_modbits>
   <for>
    <select_option title#='($.Letter) $.Name' value='$.Bit'
                   selected!='$$bit==$.Bit'>
   </for>
  </select></td>
  <td><input type=submit value='Просмотр'></td>
 </form>
</tr></table>
</element>

<html>
<preamble>
<body>
 <top ident='index'>
 <table width=100% cellpadding=5>
  <tr valign=top>
   <td width=150 class='eframe'>
    <topics>
   </td>
   <td class='cframe'>
    <subtitle>
    <selector>
    <p>
    <iterate_postinglist grp='*GRP_ALL' limit=20 offset='$offset' sort='$sort'
                         showshadows='*false' modbits!='$bit>=0 ? $bit : 0'
			 hidden!='$bit==MOD_HIDDEN ? 1 : -1'
			 disabled!='$bit==MOD_DISABLED ? 1 : -1'>
    <batcher list='$;'>
    <form method=post action='/actions/entries/modbits' style='margin: 0'>
     <hidden name='okdir' value='$-'>
     <hidden name='faildir' value='$-'>
     <buttons>
     <outer><table><inner>
      <error id='*EMO_NO_MODERATE' text='Вы не модератор'>
      <error id='*EMO_NO_ENTRY' text='Такого сообщения не существует'>
      <error id='*EMO_CANNOT_DELETE'
             text='Не могу удалить сообщение этого типа'>
     </inner></table></outer>
     <catalog_table>
      <tr>
       <th class='catalog-cell' width=40>id</th>
       <th class='catalog-cell'>Заголовок</th>
       <th class='catalog-cell' width=20>h</th>
       <th class='catalog-cell' width=20>d</th>
       <zone>
	<iterate_posting_modbits>
	<for>
	 <th class='catalog-cell' width=20>$.Letter</th>
	</for>
       </zone>
       <th class='catalog-cell' width=20>уд</th>
      </tr>
      <for name='posting'>
       <if what='$;isOdd'>
	<assign name='class' value='catalog-cell-odd'>
       <else>
	<assign name='class' value='catalog-cell'>
       </if>
       <tr height=40>
	<td class='$class' width=40 align=right>
	 $.Id
	 <hidden name='ids[]' value='$.Id'>
	</td>
	<td class='$class'>
	 <a href='$.GrpDetailsHref' class='ninept'>$=.Heading</a><br>
	 <span class='subject eightpt'>(Раздел <topiclink posting='$.'>)</span>
	</td>
	<td class='$class' align=center>
	 <checkbox_button name#='modbits[$.Id][]' value='*MOD_HIDDEN'
	                  checked='$.isHidden'>
	</td>
	<td class='$class' align=center>
	 <checkbox_button name#='modbits[$.Id][]' value='*MOD_DISABLED'
	                  checked='$.isDisabled'>
	</td>
	<zone>
	 <iterate_posting_modbits>
	 <for>
	  <td class='$class' align=center>
	   <checkbox_button name#='modbits[$posting.Id][]' value='$.Bit'
			    checked!='($posting.Modbits & $.Bit)!=0'>
	  </td>
	 </for>
	</zone>
	<td class='$class' align=center>
	 <checkbox_button name#='modbits[$.Id][]' value='*MOD_DELETE'>
	</td>
       </tr>
      </for>
     </catalog_table>
     <buttons>
    </form>
    <batcher list='$;'>
   </td>
  </tr>
 </table>
 <bottom>
</body>
</html>
