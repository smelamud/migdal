<< @(#) $Id$ >>

<modbits>
<int name='bit'>
<ifzero what='$bit'>
 <assign name='bit' value='*MOD_MODERATE'>
</ifzero>
<int name='offset'>
<int name='sort'>
<assign name='sort' value!='$sort!=*SORT_RSENT ? *SORT_SENT : *SORT_RSENT'>

<pagetitle title='Модератор'>
<topictitle title='Модератор'>

<element name='batcher' params='&list'>
<table width=100%><tr valign=bottom><td align=center>
 <spin list='$list'>
</td></tr></table>
</element>

<element name='selector'>
<table class='nframe'><tr>
 <td>
  <if what='$$sort==*SORT_SENT'>
   <a href="$[sort='*SORT_RSENT']">
    <image src='pics/down-level.gif' border=0></a>
  <else>
   <a href="$[sort='*SORT_SENT']">
    <image src='pics/up-level.gif' border=0></a>
  </if>
 </td>
 <form method=get action='$-'>
  <hidden name='sort' value='$$sort'>
  <td><select name='bit'>
   <radio title='(h) Не показывать' value='-2' peervalue='$$bit'>
   <radio title='(d) Запретить' value='-1' peervalue='$$bit'>
   <iterate_modbits>
   <for>
    <radio title#='($.Letter) $.Name' value='$.Bit' peervalue='$$bit'>
   </for>
  </select></td>
  <td><input type=submit value='Просмотр'></td>
 </form>
</tr></table>
</element>

<html>
<preamble>
<body>
 <top ident='index'>
 <table width=100% cellpadding=5>
  <tr valign=top>
   <td width=150 class='eframe'>
    <topics_admin ident='moderator'>
   </td>
   <td class='cframe'>
    <subtitle>
    <selector>
    <iterate_postinglist grp='*GRP_ALL' limit=20 offset='$offset' sort='$sort'
                         showshadows='*false' fields='*SELECT_TOPICS'
			 modbits!='$bit>=0 ? $bit : 0'
			 hidden!='$bit==-2 ? 1 : -1'
			 disabled!='$bit==-1 ? 1 : -1'>
    <batcher list='$;'>
    <div class='nframe' style='padding: 3px'>
     <form method=post action='actions/moderatemass.php' style='margin: 0'>
      <hidden name='okdir' value='$-'>
      <hidden name='faildir' value='$-'>
      <table width=100%><tr><td align=right><table><tr>
       <td><input type=submit value='Сохранить'></td>
       <td><input type=reset value='Очистить'></td>
      </tr></table></td></tr></table>
      <outer><table><inner>
       <error id='*EMM_NO_MODERATE' text='Вы не модератор'>
       <error id='*EMM_NO_MESSAGE' text='Такого сообщения не существует'>
      </inner></table></outer>
      <table width=100% class='catalog'>
       <tr>
	<th width=40>id</th><th>Заголовок</th><th width=20>h</th>
	<th width=20>d</th>
	<zone>
	 <iterate_modbits>
	 <for>
	  <th width=20>$.Letter</th>
	 </for>
	</zone>
	<th width=20>&nbsp;</th>
       </tr>
       <for name='posting'>
        <identify posting='$.'>
	<if what='$;isOdd'>
	 <tr class='odd' height=40>
	<else>
	 <tr height=40>
	</if>
	 <td width=40 align=right>
	  $.Id
	  <hidden name='id[]' value='$.MessageId'>
	 </td>
	 <td>
	  <a href='$.DetailsHref' class='ninept'>$.Heading</a><br>
	  <span class='subject eightpt'>(Раздел <topiclink posting='$.'>)</span>
	 </td>
	 <td align=center>
	  <checkbox_button name#='hidden$.MessageId' value='$.isHidden'>
	 </td>
	 <td align=center>
	  <checkbox_button name#='disabled$.MessageId' value='$.isDisabled'>
	 </td>
	 <zone>
	  <iterate_modbits>
	  <for>
	   <td align=center>
	    <checkbox_button name#='bit$posting.MessageId-$.Bit'
	                     value='$posting.getModbits & $.Bit'>
	   </td>
	  </for>
	 </zone>
	 <td align=center><b>
	  <a href='actions/postingdel.php?id=$.Id&okdir=$#-&faildir=$#-'>X</a>
	 </b></td>
	</tr>
       </for>
      </table>
     </form>
    </div>
    <batcher list='$;'>
   </td>
  </tr>
 </table>
 <bottom>
</body>
</html>
